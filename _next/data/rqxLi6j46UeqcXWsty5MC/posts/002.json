{"pageProps":{"post":{"title":"AHC025 参加記","date":"2023-10-21","slug":"002","content":"<h2 id=\"問題\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#問題\"><span class=\"icon icon-link\"></span></a>問題</h2>\n<p><a href=\"https://atcoder.jp/contests/ahc025/tasks/ahc025_a\">問題文</a><br>\n未知の重さのグッズがたくさんあるので、天秤だけを使ってできるだけ公平に等分する</p>\n<p>より正確には<br>\n<code class=\"language-math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>30</mn><mo>≤</mo><mi>N</mi><mo>≤</mo><mn>100</mn></mrow><annotation encoding=\"application/x-tex\">30≤N≤100</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7804em;vertical-align:-0.136em;\"></span><span class=\"mord\">30</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8193em;vertical-align:-0.136em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">100</span></span></span></span></code><br>\n<code class=\"language-math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mo>≤</mo><mi>D</mi><mo>≤</mo><mi>N</mi><mi mathvariant=\"normal\">/</mi><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">2≤D≤N/4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7804em;vertical-align:-0.136em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8193em;vertical-align:-0.136em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord\">/4</span></span></span></span></code><br>\n<code class=\"language-math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mi>N</mi><mo>≤</mo><mi>Q</mi><mo>≤</mo><mn>32</mn><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">2N≤Q≤32N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8193em;vertical-align:-0.136em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8778em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">Q</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\">32</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span></span></span></span></code><br>\nの条件の下で N個のグッズをQ回以内の比較でD個に分けて、その分散の最小化をする。<br>\nまた、グッズの重さは指数分布からランダムに決められる。</p>\n<h2 id=\"思いついた解法\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#思いついた解法\"><span class=\"icon icon-link\"></span></a>思いついた解法</h2>\n<h3 id=\"数理計画法\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#数理計画法\"><span class=\"icon icon-link\"></span></a>数理計画法</h3>\n<p>大小関係の情報を条件として、分散最小化（LPに落とし込むなら平均との絶対値の差の合計最小化とかになる？）を目的関数としてうにゃうにゃやればできそう。\nが、条件として聞く比較対象の決定がめんどくさそう &#x26; LPの自前実装が大変そう　ということで却下</p>\n<h3 id=\"ベイズ最適化みたいななにがし\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#ベイズ最適化みたいななにがし\"><span class=\"icon icon-link\"></span></a>ベイズ最適化みたいななにがし</h3>\n<p>上と近いが、重さの分布が与えられてることなどを考えて、最尤推定みたいなことをやれば理論上最強\nが、そんなことを器用にできる数学力があるわけはなく却下</p>\n<h3 id=\"貪欲\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#貪欲\"><span class=\"icon icon-link\"></span></a>貪欲</h3>\n<p>実装が楽なのでこれを採用（内容は後述）</p>\n<h2 id=\"最終解法\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#最終解法\"><span class=\"icon icon-link\"></span></a>最終解法</h2>\n<p>結局たいして時間は取れず、最低限の実装だけして終わった。</p>\n<p>（Qに余裕があれば）ソートして大きい順に並び替え<br>\n↓<br>\nD個の袋を用意したうえで「現時点で最も軽い袋を算出し、そこにグッズを入れる」を最後まで繰り返す（これはheapqを使うと非常にシンプルに実装できる）</p>\n<p>ソートにしてもheapqにしても自前実装がだるいなあと思っていが、演算子オーバーロードを使えばそのまま標準アルゴリズムが使えることに気づいて感動。</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># 演算子オーバーロードを用いたソート（説明のため単純化）</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Item</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n  <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    self<span class=\"token punctuation\">.</span>n<span class=\"token operator\">=</span><span class=\"token number\">0</span>\n\n  <span class=\"token keyword\">def</span> <span class=\"token function\">__lt__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span>other<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"1 1 </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>self<span class=\"token punctuation\">.</span>n<span class=\"token punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>other<span class=\"token punctuation\">.</span>n<span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n    res<span class=\"token operator\">=</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> res<span class=\"token operator\">==</span><span class=\"token string\">\"&#x3C;\"</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n  L<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>Item<span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>N<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n  L<span class=\"token punctuation\">.</span>sort<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p>Qに余裕があるケースではそれなりにうまくいってるっぽい。\n<img src=\"../../assets/blog//assets/blog/002/1.png\" alt=\"\"></p>\n<p>このあと、山登り的なのをためそうとしたがあっという間にサチってうまくいかず、306位（1523 perf）フィニッシュ</p>","ogImage":{"url":"/assets/blog/002/1.png"},"coverImage":"/assets/blog/002/1.png","excerpt":"AtCoder Heuristic Contest 025 参加記","tags":["競プロ"]}},"__N_SSG":true}